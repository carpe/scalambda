<!DOCTYPE html><html><head><title>scalambda: Configuration</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Carpe Data" /><meta name="description" content="Toolkit for building/deploying Lambda Functions with SBT" /><meta name="og:image" content="/scalambda/img/poster.png" /><meta name="image" property="og:image" content="/scalambda/img/poster.png" /><meta name="og:title" content="scalambda: Configuration" /><meta name="title" property="og:title" content="scalambda: Configuration" /><meta name="og:site_name" content="scalambda" /><meta name="og:url" content="https://carpe.github.io/scalambda/" /><meta name="og:type" content="website" /><meta name="og:description" content="Toolkit for building/deploying Lambda Functions with SBT" /><link rel="icon" type="image/png" href="/scalambda/img/favicon.png" /><meta name="twitter:title" content="scalambda: Configuration" /><meta name="twitter:image" content="/scalambda/img/poster.png" /><meta name="twitter:description" content="Toolkit for building/deploying Lambda Functions with SBT" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/scalambda/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/scalambda/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/scalambda/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/scalambda/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/scalambda/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/scalambda/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/scalambda/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/scalambda/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/scalambda/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/scalambda/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/scalambda/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/scalambda/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/scalambda/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/scalambda/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/scalambda/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/scalambda/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/scalambda/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/scalambda/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/scalambda/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/scalambda/img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scalambda/highlight/styles/vs.css" /><link rel="stylesheet" href="/scalambda/css/light-style.css" /><script async="async">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-85042842-3' , 'auto');
ga('send', 'pageview');
      </script></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><div id="sidebar-brand"><a href="/scalambda/" class="brand"><div class="brand-wrapper"></div><span>scalambda</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button></div><div class="sidebar-nav"> <div class="sidebar-nav-item  "><a href="/scalambda/docs/" title="Getting Started" class="">Getting Started</a></div> <div class="sidebar-nav-item active "><a href="/scalambda/docs/configuration" title="Configuring Functions" class="active">Configuring Functions</a></div> <div class="sidebar-nav-item  "><a href="/scalambda/docs/writing-functions" title="Writing Functions" class="">Writing Functions</a></div> <div class="sidebar-nav-item  "><a href="/scalambda/docs/deploying-functions" title="Deploying Functions" class="">Deploying Functions</a></div> <div class="sidebar-nav-item  "><button type="button" title="Api Gateway" class="button drop-nested">Api Gateway</button><i class="fa fa-angle-right"></i><div class="sub-section"> <a href="/scalambda/docs/api/create-api" title="Create an API" class="">Create an API</a> <a href="/scalambda/docs/api/deploy-api" title="Deploy an API" class="">Deploy an API</a></div></div> <div class="sidebar-nav-item  "><a href="/scalambda/docs/thegraaaaal/" title="Using Graal Native" class="">Using Graal Native</a></div></div></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li id="gh-eyes-item" class="hidden-xs to-uppercase"><a href="https://github.com/carpe/scalambda" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs to-uppercase"><a href="https://github.com/carpe/scalambda" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="carpe" data-github-repo="scalambda"><div class="content-wrapper"><section><h2 id="defining-scalambdas">Defining Scalambdas</h2>

<p>After importing the plugin into your project, you can then use the <code class="language-plaintext highlighter-rouge">scalambda</code> function to define Lambda Functions from your project’s sources.</p>

<h5 id="example">Example</h5>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// build.sbt</span>

<span class="c1">// a basic lambda function using default settings</span>
<span class="k">lazy</span> <span class="k">val</span> <span class="nv">example</span> <span class="k">=</span> <span class="n">project</span>
  <span class="o">.</span><span class="py">enablePlugins</span><span class="o">(</span><span class="nc">ScalambdaPlugin</span><span class="o">)</span>
  <span class="o">.</span><span class="py">settings</span><span class="o">(</span>
    <span class="nf">scalambda</span><span class="o">(</span>
      <span class="n">functionClasspath</span> <span class="k">=</span> <span class="o">???</span> <span class="c1">// example: "io.carpe.example.ExampleFunction"</span>
    <span class="o">)</span>
  <span class="o">)</span>

<span class="c1">// you can also create multiple functions that share the same source</span>
<span class="k">lazy</span> <span class="k">val</span> <span class="nv">multipleFunctions</span> <span class="k">=</span> <span class="n">project</span>
  <span class="o">.</span><span class="py">enablePlugins</span><span class="o">(</span><span class="nc">ScalambdaPlugin</span><span class="o">)</span>
  <span class="o">.</span><span class="py">settings</span><span class="o">(</span>
    <span class="c1">// first function</span>
    <span class="nf">scalambda</span><span class="o">(</span>
      <span class="n">functionClasspath</span> <span class="k">=</span> <span class="o">???</span> <span class="c1">// example: "io.carpe.example.ExampleFunction"</span>
    <span class="o">)</span>
    <span class="c1">// second function</span>
    <span class="nf">scalambda</span><span class="o">(</span>
      <span class="n">functionClasspath</span> <span class="k">=</span> <span class="o">???</span> <span class="c1">// example: "io.carpe.example.ExampleFunction"</span>
    <span class="o">)</span>
  <span class="o">)</span>

</code></pre></div></div>

<p>The first time the <code class="language-plaintext highlighter-rouge">scalambda</code> function is ran within a project, sbt will automatically inject in the <code class="language-plaintext highlighter-rouge">scalambda-core</code> and <code class="language-plaintext highlighter-rouge">scalambda-testing</code> libraries. These libraries provide you with a traits and helpers to make developing and testing lambda functions quick and easy.</p>

<h2 id="settings">Settings</h2>

<p>Once you have enabled the Scalambda plugin, you’ll be able to set some settings that are shared by all functions within the current project. That being said, the bulk of the configuration options are configured by modifying the parameters to each <code class="language-plaintext highlighter-rouge">scalambda</code> function invocation.</p>

<h4 id="project-settings">Project Settings</h4>

<p>This is the full list of settings that are shared by all your functions.</p>

<table>
  <thead>
    <tr>
      <th>Setting Key</th>
      <th>Type</th>
      <th>Description</th>
      <th style="text-align: right">Default Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>s3BucketName</td>
      <td>String</td>
      <td>Prefix for S3 bucket name to store binaries in</td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">sbt.Keys.name</code></td>
    </tr>
    <tr>
      <td>billingTags</td>
      <td>Seq[BillingTag]</td>
      <td>AWS Billing Tags to apply to all terraformed resources. You can also provide billing tags via a terraform variable in the generated module. See below for details.</td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">Nil</code></td>
    </tr>
    <tr>
      <td>scalambdaTerraformPath</td>
      <td>File</td>
      <td>Path to where terraform should be written to</td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">sbt.Keys.target / "terraform"</code></td>
    </tr>
    <tr>
      <td>scalambdaDependenciesMergeStrat</td>
      <td>MergeStrategy</td>
      <td><code class="language-plaintext highlighter-rouge">sbt-assembly</code> MergeStrategy for your dependencies jar</td>
      <td style="text-align: right"><a href="https://github.com/carpe/scalambda/blob/develop/plugin/src/main/scala/io/carpe/scalambda/assembly/AssemblySettings.scala#L39-L46">Check it out</a></td>
    </tr>
    <tr>
      <td>apiName</td>
      <td>String</td>
      <td>Name for Api Gateway instance</td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">sbt.Keys.name</code></td>
    </tr>
    <tr>
      <td>domainName</td>
      <td>ApiDomain</td>
      <td>Domain name for Api Gateway</td>
      <td style="text-align: right">-</td>
    </tr>
  </tbody>
</table>

<h4 id="lambda-settings">Lambda Settings</h4>

<p>Each <code class="language-plaintext highlighter-rouge">scalambda</code> function accepts a wide range of parameters. Although, the only required parameter is the <code class="language-plaintext highlighter-rouge">functionClasspath</code>.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Description</th>
      <th style="text-align: right">Default Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>functionClasspath</td>
      <td>String</td>
      <td>path to the class that contains the handler for your lambda function</td>
      <td style="text-align: right">-</td>
    </tr>
    <tr>
      <td>functionNaming</td>
      <td>FunctionNaming</td>
      <td>controls how your lambda function is named</td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">WorkspaceBased</code></td>
    </tr>
    <tr>
      <td>iamRoleSource</td>
      <td>FunctionRoleSource</td>
      <td>controls how your lambda function receives it’s IAM role. Options are <code class="language-plaintext highlighter-rouge">RoleFromVariable</code> or <code class="language-plaintext highlighter-rouge">RoleFromArn</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">RoleFromVariable</code></td>
    </tr>
    <tr>
      <td>memory</td>
      <td>Int</td>
      <td>amount of memory for your function to use (in MBs)</td>
      <td style="text-align: right">1536</td>
    </tr>
    <tr>
      <td>runtime</td>
      <td>ScalambdaRuntime</td>
      <td>runtime for your function to use. Options are <code class="language-plaintext highlighter-rouge">Java8</code>, <code class="language-plaintext highlighter-rouge">Java11</code>, or <code class="language-plaintext highlighter-rouge">GraalNative</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">Java8</code></td>
    </tr>
    <tr>
      <td>concurrencyLimit</td>
      <td>Int</td>
      <td>maximum number of concurrent instances of your Function</td>
      <td style="text-align: right">-</td>
    </tr>
    <tr>
      <td>warmWith</td>
      <td>WarmerConfig</td>
      <td>controls how your lambda function will be kept “warm”</td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">WarmerConfig.Cold</code></td>
    </tr>
    <tr>
      <td>vpcConfig</td>
      <td>VpcConfig</td>
      <td>use this setting if you need to run your Lambda Function inside a VPC. Options are <code class="language-plaintext highlighter-rouge">StaticVpcConfig</code> and <code class="language-plaintext highlighter-rouge">VpcFromTF</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">VpcConf.withoutVpc</code></td>
    </tr>
    <tr>
      <td>environmentVariables</td>
      <td>Seq[EnvironmentVariable]</td>
      <td>use this to inject ENV variables into your Lambda Function. Options are <code class="language-plaintext highlighter-rouge">StaticVariable</code> and <code class="language-plaintext highlighter-rouge">VariableFromTF</code></td>
      <td style="text-align: right">Nil</td>
    </tr>
  </tbody>
</table>

<p>Note: If you use the GraalNative runtime, please make sure to read <a href="https://carpe.github.io/scalambda/docs/thegraaaaal/">the documentation page</a> for additional information (and a list of disclaimers a mile long).</p>

<h4 id="terraform-module-settings">Terraform Module Settings</h4>

<p>When/if you run <code class="language-plaintext highlighter-rouge">scalambdaTerraform</code>, several variables will be generated in the outputted module.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Description</th>
      <th style="text-align: right">Default Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>your_function_name_billing_tags</td>
      <td>map</td>
      <td>Billing tags for the function. These will be merged with the billing tags provided via the plugin <code class="language-plaintext highlighter-rouge">billingTags</code> setting.</td>
      <td style="text-align: right">{}</td>
    </tr>
    <tr>
      <td>s3_billing_tags</td>
      <td>map</td>
      <td>Billing tags for the S3 bucket. These will be merged with the billing tags provided via the plugin <code class="language-plaintext highlighter-rouge">billingTags</code> setting.</td>
      <td style="text-align: right">{}</td>
    </tr>
    <tr>
      <td>enable_xray</td>
      <td>boolean</td>
      <td>If enabled, the Api Gateway stage in this module will create traces in AWS X-Ray for each request.</td>
      <td style="text-align: right">false</td>
    </tr>
    <tr>
      <td>access_log_cloudwatch_arn</td>
      <td>string</td>
      <td>The arn of a Cloudwatch Log Group that you’d like the Api Gateway stage to send access logs to. Make sure that you have <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-logging.html#set-up-access-logging-permissions">set up a proper role</a> for ApiGateway to use to log before using this setting.</td>
      <td style="text-align: right">-</td>
    </tr>
    <tr>
      <td>access_log_format</td>
      <td>string</td>
      <td>The format for the Api Gateway stage’s access logs. Check the <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-logging.html">docs</a> to see how to customize this.</td>
      <td style="text-align: right">-</td>
    </tr>
  </tbody>
</table>

<h2 id="tasks">Tasks</h2>

<p>The following tasks are also available to each project that has enabled the plugin.</p>

<table>
  <thead>
    <tr>
      <th>Setting Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>scalambdaTerraform</td>
      <td>Produces a Terraform module from the project’s scalambda configuration</td>
    </tr>
    <tr>
      <td>scalambdaPackage</td>
      <td>Create jar (without dependencies) for your Lambda Function(s)</td>
    </tr>
    <tr>
      <td>scalambdaPackageDependencies</td>
      <td>Create a jar containing all the dependencies for your Lambda Function(s)</td>
    </tr>
  </tbody>
</table>
</section></div></div></div></div><script src="/scalambda/highlight/highlight.pack.js"></script><script src="/scalambda/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script src="/scalambda/js/search.js"></script><script src="/scalambda/js/docs.js"></script></body></html>